# File: nginx/default.conf (Cập nhật để phục vụ file tĩnh)

# KHỐI 1: TỰ ĐỘNG CHUYỂN HƯỚNG HTTP -> HTTPS (Giữ nguyên)
server {
    listen 80;
    server_name app.hanoisuntravel.com www.app.hanoisuntravel.com;

    location ~ /.well-known/acme-challenge {
        allow all;
        root /var/www/certbot;
    }

    location / {
        return 301 https://$host$request_uri;
    }
}

# KHỐI 2: CẤU HÌNH CHO HTTPS (Sửa đổi)
server {
    listen 443 ssl http2;
    server_name app.hanoisuntravel.com www.app.hanoisuntravel.com;

    ssl_certificate /etc/letsencrypt/live/app.hanoisuntravel.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/app.hanoisuntravel.com/privkey.pem;
    
    # ... (các cấu hình ssl khác giữ nguyên) ...

    # === THAY ĐỔI QUAN TRỌNG Ở ĐÂY ===
    location / {
        # Trỏ đến thư mục chứa file tĩnh đã được build trong Dockerfile
        root /usr/share/nginx/html;
        
        # Thử tìm file khớp với URI, nếu không tìm thấy thì trả về /index.html
        # Dòng này cực kỳ quan trọng cho các ứng dụng Single Page App (React, Vue...)
        try_files $uri $uri/ /index.html;
    }
}
